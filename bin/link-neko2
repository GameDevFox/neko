CONFIG_PATH="$NEKO/config"

function try_link () {
  LINE=$1

  NEKO_PATH="$(realpath --relative-to="$CONFIG_PATH" $LINE)"
  LINK_PATH="$HOME/$NEKO_PATH"

  if [ -h "$LINK_PATH" ]; then
    echo "Link ~/$NEKO_PATH already exists"
  else
    ln -s "$LINE" .
    echo "Created ~/$NEKO_PATH link"
  fi
}

find $NEKO/config -type f -depth 1 | sort | while read LINE; do
  try_link $LINE
done

# find $NEKO/config | sort | tail -n+2 | while read LINE; do
#   if [ -f "$LINE" ]; then
#     echo "LINK: $LINE"
#   elif [ -d "$LINE" ]; then
#     echo "DIR: $LINE"
#   else
#     echo "Error: $LINE"
#   fi
# done

## directories

# atom
mkdir -p ~/.atom
ln -s ~/royal-neko/config/atom/init.coffee ~/.atom/init.coffee
ln -s ~/royal-neko/config/atom/keymap.cson ~/.atom/keymap.cson
ln -s ~/royal-neko/config/atom/snippets.cson ~/.atom/snippets.cson

mkdir -p ~/.emacs.d/
ln -s ~/royal-neko/config/emacs.d/init.el ~/.emacs.d
ln -s ~/royal-neko/config/emacs.d/snippets ~/.emacs.d

## .config
mkdir -p ~/.config/htop
ln -s ~/royal-neko/config/htop/htoprc ~/.config/htop/htoprc

mkdir -p ~/.config/i3/
ln -s ~/royal-neko/config/.config/i3/config ~/.config/i3

mkdir -p ~/.config/i3status
ln -s ~/royal-neko/config/i3status/config ~/.config/i3status/config
