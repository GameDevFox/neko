#!/usr/bin/env node
// -*- mode: js2 -*-

var exec = require("child_process").execSync;
var _ = require("lodash");

var cmd = '';

var parseFn = (value, key) => {
    var parts = value.split(/\s/);
    var parts = _.filter(parts, function(part) {
        return part.trim().length != 0;
    });
    return parts;
};

//////////////////////////////////////////////
//////////////////////////////////////////////

cmd = (cmd.length) ? cmd : process.argv[2];

var stdout = exec(cmd).toString();
var lines = stdout.split(/\n/);
lines = _.filter(lines, line => line.trim().length > 0);

// Parse lines
var result = _.map(lines, parseFn);
console.log(result);
