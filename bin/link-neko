#!/bin/bash
config="$HOME/.config"
neko_config="${NEKO:-$HOME/royal-neko}/config"

cd "$neko_config"
files=$()

find . -type f -print0 | while read -d $'\0' file; do
  base_dir="$(dirname "$file")"
  base_name="$(basename "$file")"

  dest_dir="$(realpath "$HOME/$base_dir")"
  source="$(realpath "$neko_config/$file")"
  dest="$(realpath "$dest_dir/$base_name")"

  mkdir -p $dest_dir
  if [ "$source" != "$dest"  ]; then
    ln -s "$source" "$dest"
    [ "$?" = "0" ] && echo "Created link from $source to $dest"
  fi
done
