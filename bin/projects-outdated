#!/bin/bash
(
  echo "commits-past-master files stash project"

  for project in $(projects-list); do
    cd "$project"
    git branch --remote | grep "origin/master" >/dev/null 2>&1
    exitCode="$?"

    if [ "$exitCode" = "0" ]; then
      commits=$(git-outdated)
      files=$(git status --short | wc -l)
      stash=$(git stash list | wc -l)
      echo "$commits $files $stash $project"
    else
      echo "- - - $project"
    fi
  done
) | column -t
