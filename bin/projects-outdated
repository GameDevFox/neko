#!/bin/bash
(
  echo "files stash commits project"

  for project in $(projects-list); do
    cd "$project"
    git branch --remote | grep "origin/master" >/dev/null 2>&1
    exitCode="$?"

    if [ "$exitCode" = "0" ]; then
      files=$(git status --short | wc -l)
      stash=$(git stash list | wc -l)
      commits=$(git-outdated)

      if [ "$files" = "0" ] && [ "$stash" = "0" ] && [ "$commits" = "0" ]; then
        echo "- - - $project";
      else
        echo "$files $stash $commits $project"
      fi
    else
      echo "? ? ? $project"
    fi
  done
) | column -t
